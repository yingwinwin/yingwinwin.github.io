(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{138:function(e,n,t){"use strict";t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return b}));var r=t(0),a=t.n(r);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=a.a.createContext({}),i=function(e){var n=a.a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},d=function(e){var n=i(e.components);return a.a.createElement(p.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},u=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=i(t),u=r,b=d["".concat(l,".").concat(u)]||d[u]||m[u]||o;return t?a.a.createElement(b,c(c({ref:n},p),{},{components:t})):a.a.createElement(b,c({ref:n},p))}));function b(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=u;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,l[1]=c;for(var p=2;p<o;p++)l[p]=t[p];return a.a.createElement.apply(null,l)}return a.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},193:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/jsx-d91724af87312d5d6402bd83751b45db.png"},194:function(e,n,t){"use strict";t.r(n),n.default=t.p+"assets/images/setState2-558cd737ba4301aacde3b0756462d889.jpg"},77:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"metadata",(function(){return c})),t.d(n,"toc",(function(){return s})),t.d(n,"default",(function(){return i}));var r=t(3),a=t(7),o=(t(0),t(138)),l={id:"react_render",title:"react\u6e32\u67d3"},c={unversionedId:"react_render",id:"react_render",isDocsHomePage:!1,title:"react\u6e32\u67d3",description:"\u4e00\u3001JSX",source:"@site/docs/react_render.md",slug:"/react_render",permalink:"/docs/react_render",editUrl:"https://github.com/yingwinwin/yingwinwin.github.io/tree/master/docs/react_render.md",version:"current",sidebar:"someError",previous:{title:"react\u4e2d\u4f7f\u7528ts",permalink:"/docs/reactUseTs"},next:{title:"react\u751f\u547d\u5468\u671f",permalink:"/docs/react_lifecycle"}},s=[{value:"\u4e00\u3001JSX",id:"\u4e00\u3001jsx",children:[{value:"1. JSX \u548c \u865a\u62dfDOM",id:"1-jsx-\u548c-\u865a\u62dfdom",children:[]},{value:"2. JSX\u5c5e\u6027\u548c\u8868\u8fbe\u5f0f",id:"2-jsx\u5c5e\u6027\u548c\u8868\u8fbe\u5f0f",children:[]},{value:"3. JSX\u662f\u4e00\u4e2a\u5bf9\u8c61",id:"3-jsx\u662f\u4e00\u4e2a\u5bf9\u8c61",children:[]}]},{value:"\u4e8c\u3001react\u4e2d\u7684\u66f4\u65b0",id:"\u4e8c\u3001react\u4e2d\u7684\u66f4\u65b0",children:[{value:"1. react \u6e32\u67d3\u4e2d\u7684key\u5c5e\u6027",id:"1-react-\u6e32\u67d3\u4e2d\u7684key\u5c5e\u6027",children:[]},{value:"2. react\u66f4\u65b0\u5143\u7d20\u7684\u6e32\u67d3",id:"2-react\u66f4\u65b0\u5143\u7d20\u7684\u6e32\u67d3",children:[]}]},{value:"\u4e09\u3001\u5177\u4f53\u5b9e\u73b0",id:"\u4e09\u3001\u5177\u4f53\u5b9e\u73b0",children:[{value:"1. React.createElement()\u5904\u7406\u865a\u62dfdom",id:"1-reactcreateelement\u5904\u7406\u865a\u62dfdom",children:[]},{value:"2. \u5b9e\u73b0\u5bf9\u539f\u751f\u7684\u8282\u70b9\u8fdb\u884c\u6e32\u67d3",id:"2-\u5b9e\u73b0\u5bf9\u539f\u751f\u7684\u8282\u70b9\u8fdb\u884c\u6e32\u67d3",children:[]},{value:"3. \u5b9e\u73b0\u5bf9\u81ea\u5b9a\u4e49\u51fd\u6570\u7ec4\u4ef6\u7684\u6e32\u67d3",id:"3-\u5b9e\u73b0\u5bf9\u81ea\u5b9a\u4e49\u51fd\u6570\u7ec4\u4ef6\u7684\u6e32\u67d3",children:[]},{value:"4. \u6e32\u67d3\u7c7b\u7ec4\u4ef6",id:"4-\u6e32\u67d3\u7c7b\u7ec4\u4ef6",children:[]},{value:"5. \u7c7b\u7ec4\u4ef6\u7684\u66f4\u65b0\uff08\u65e0diff\uff09",id:"5-\u7c7b\u7ec4\u4ef6\u7684\u66f4\u65b0\uff08\u65e0diff\uff09",children:[]},{value:"6. \u7c7b\u7ec4\u4ef6\u7684\u6279\u91cf\u66f4\u65b0",id:"6-\u7c7b\u7ec4\u4ef6\u7684\u6279\u91cf\u66f4\u65b0",children:[]},{value:"7. \u5408\u6210\u4e8b\u4ef6\u5904\u7406",id:"7-\u5408\u6210\u4e8b\u4ef6\u5904\u7406",children:[]}]}],p={toc:s};function i(e){var n=e.components,l=Object(a.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},p,l,{components:n,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"\u4e00\u3001jsx"},"\u4e00\u3001JSX"),Object(o.b)("h3",{id:"1-jsx-\u548c-\u865a\u62dfdom"},"1. JSX \u548c \u865a\u62dfDOM"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"jsx \u662f React.createElement() \u65b9\u6cd5\u7684\u8bed\u6cd5\u7cd6\uff0cjsx\u901a\u8fc7babel\u7ffb\u8bd1\u4e3a\u7528React.createElement()\u8c03\u7528")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"let element1 = <h1 id = 'title'>hello</h1>;\nlet element2 = React.createElement('h1', {\n  id: 'title'\n}, 'hello')\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"element1 \u548c element2 \u6267\u884c\u7684\u65f6\u5019, \u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u865a\u62dfDOM, \u90fd\u4f1a\u88ab\u7f16\u8bd1\u4e3aelement2\u7684\u5f62\u5f0f\uff0c\u5728\u6d4f\u89c8\u5668\u8fd0\u884c\u7684\u65f6\u5019\u8c03\u7528React.createElement()\u8c03\u7528\u6267\u884c\u3002\u53d8\u6210\u865a\u62dfDOM")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},'// \u5982\u679c\u53ea\u6709\u4e00\u4e2a\u5b69\u5b50\uff0c\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u8005\u5bf9\u8c61\n<h1 id = \'title\'>hello</h1>\n// \u7f16\u8bd1\u540e\n{\n  "type": "h1",\n  "key": null,\n  "ref": null,\n  "props": {\n    "id": "title",\n    "children": "hello"  // \u662f\u5b57\u7b26\u4e32\n  },\n  "_owner": null,\n  "_store": {}\n}\n')),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},'<h1 id = \'title\'>\n    <div>world</div>\n</h1>\n// \u7f16\u8bd1\u540e\n{\n  "type": "h1",\n  "key": null,\n  "ref": null,\n  "props": {\n    "id": "title",\n    "children": {  // \u53ea\u6709\u4e00\u4e2a\u5b69\u5b50\u5143\u7d20\uff0c\u662f\u5bf9\u8c61\n      "type": "div",\n      "key": null,\n      "ref": null,\n      "props": {\n        "children": "world"\n      },\n      "_owner": null,\n      "_store": {}\n    }\n  },\n  "_owner": null,\n  "_store": {}\n}\n')),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},'// \u5982\u679c\u6709\u4e24\u4e2a\u5b69\u5b50\uff0cchildren\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u91cc\u9762\u6709\u53ef\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u8005\u5bf9\u8c61\nReact.createElement(\'h1\', {\n  id: \'title\'\n}, \'hello\', \'world\')\n// \u7f16\u8bd1\u540e\n{\n  "type": "h1",\n  "key": null,\n  "ref": null,\n  "props": {\n    "id": "title",\n    "children": [ // \u6570\u7ec4\u91cc\u9762\u662f\u5b57\u7b26\u4e32\n      "hello",\n      "world"\n    ]\n  },\n  "_owner": null,\n  "_store": {}\n}\n')),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},'// \u6570\u7ec4\u91cc\u9762\u662f\u5bf9\u8c61\n<h1 id = \'title\'>\n    <div>hello</div>\n    <div>world</div>\n</h1>\n// \u7f16\u8bd1\u540e\n{\n  "type": "h1",\n  "key": null,\n  "ref": null,\n  "props": {\n    "id": "title",\n    "children": [  // \u6570\u7ec4\u91cc\u9762\u662f\u5bf9\u8c61\n      {\n        "type": "div",\n        "key": null,\n        "ref": null,\n        "props": {\n          "children": "world"\n        },\n        "_owner": null,\n        "_store": {}\n      },\n      {\n        "type": "div",\n        "key": null,\n        "ref": null,\n        "props": {\n          "children": "world"\n        },\n        "_owner": null,\n        "_store": {}\n      }\n    ]\n  },\n  "_owner": null,\n  "_store": {}\n}\n')),Object(o.b)("p",null,Object(o.b)("img",{alt:"image",src:t(193).default})),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u95ee\u9898\uff1a\u4e3a\u4ec0\u4e48children\u6709\u5199\u662f\u6570\u7ec4\u6709\u4e9b\u662f\u5b57\u7b26\u4e32\u6216\u8005\u5355\u72ec\u7684\u5bf9\u8c61\u3002"),Object(o.b)("li",{parentName:"ul"},"\u7b54\uff1a\u56e0\u4e3areact\u4e2d\u5904\u7406\u4e00\u4e2a\u5355\u72ec\u5bf9\u8c61\u7684\u60c5\u51b5\u5f88\u591a\uff0c\u8fd8\u6709\u51fd\u6570\u7684\u8fd4\u56de\u503c\u90fd\u662f\u4e00\u4e2a\u5143\u7d20\uff0c\u6bd4\u5982\u8bf4render()\u51fd\u6570\u4e2dreturn\u7684\u4e00\u4e2a\u8282\u70b9\u3002\u800c\u4e14\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u513f\u5b50\uff0c\u4e14\u662f\u6587\u672c\u8282\u70b9\uff0creact\u91cc\u9762\u4e5f\u8fdb\u884c\u4e86\u4f18\u5316")),Object(o.b)("h3",{id:"2-jsx\u5c5e\u6027\u548c\u8868\u8fbe\u5f0f"},"2. JSX\u5c5e\u6027\u548c\u8868\u8fbe\u5f0f"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"JSX \u5c5e\u6027\u4e2d\u4e0d\u53ef\u4ee5\u53ea\u7528\u5173\u952e\u5b57",Object(o.b)("inlineCode",{parentName:"li"},"class for"),"\u7b49\uff0c",Object(o.b)("inlineCode",{parentName:"li"},"class"),"\u9700\u8981\u8f6c\u6362\u4e3a",Object(o.b)("inlineCode",{parentName:"li"},"className"),"\uff0c",Object(o.b)("inlineCode",{parentName:"li"},"for"),"\u9700\u8981\u8f6c\u6362\u4e3a",Object(o.b)("inlineCode",{parentName:"li"},"htmlFor"),"\uff0c",Object(o.b)("inlineCode",{parentName:"li"},"style={{color: red}}")),Object(o.b)("li",{parentName:"ul"},"\u8868\u8fbe\u5f0f\uff1a{}, \u5982\u679c\u60f3\u5728JSX\u4e2d\u52a0\u5165js\u53d8\u91cf\u7684\u8bdd\uff0c\u53ef\u4ee5\u7528{}\u5305\u8d77\u6765")),Object(o.b)("h3",{id:"3-jsx\u662f\u4e00\u4e2a\u5bf9\u8c61"},"3. JSX\u662f\u4e00\u4e2a\u5bf9\u8c61"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u53ef\u4ee5\u5728if \u548c for \u8bed\u53e5\u4e2d\u4f7f\u7528"),Object(o.b)("li",{parentName:"ul"},"\u53ef\u4ee5\u8d4b\u503c\u7ed9\u53d8\u91cf"),Object(o.b)("li",{parentName:"ul"},"\u53ef\u4ee5\u5f53\u53c2\u6570"),Object(o.b)("li",{parentName:"ul"},"\u53ef\u4ee5\u5f53\u8fd4\u56de\u503c")),Object(o.b)("h2",{id:"\u4e8c\u3001react\u4e2d\u7684\u66f4\u65b0"},"\u4e8c\u3001react\u4e2d\u7684\u66f4\u65b0"),Object(o.b)("h3",{id:"1-react-\u6e32\u67d3\u4e2d\u7684key\u5c5e\u6027"},"1. react \u6e32\u67d3\u4e2d\u7684key\u5c5e\u6027"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u7528\u4e8ereact\u66f4\u65b0\u64cd\u4f5c"),Object(o.b)("li",{parentName:"ul"},"\u5982\u679c\u7528\u6237\u4f20\u5165key\uff0creact\u4f1a\u6839\u636ekey\u6765\u8fdb\u884cDOM diff\u7684\u5bf9\u6bd4\uff0c\u8fdb\u884c\u8282\u70b9\u590d\u7528\u3002"),Object(o.b)("li",{parentName:"ul"},"\u5982\u679c\u7528\u6237\u6ca1\u6709\u4f20\u5165key\uff0creact\u4f1a\u7528\u4f4d\u7f6e\u8fdb\u884c\u4e00\u4e00\u5bf9\u6bd4\uff0c\u4e0d\u4e00\u6837\u5c31\u5220\u9664\u91cd\u5efa\uff0c\u6ca1\u6709\u590d\u7528\u7684\u903b\u8f91\uff0c\u6d88\u8017\u6027\u80fd\u3002")),Object(o.b)("h3",{id:"2-react\u66f4\u65b0\u5143\u7d20\u7684\u6e32\u67d3"},"2. react\u66f4\u65b0\u5143\u7d20\u7684\u6e32\u67d3"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"react\u5143\u7d20\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u53ea\u662f\u53ea\u8bfb\u7684\u3002"),Object(o.b)("li",{parentName:"ul"},"react\u7684\u5c5e\u6027\u662f\u4e0d\u53ef\u53d8\u7684\uff0c\u6240\u4ee5\u4e0d\u53ef\u80fd\u628a\u4e00\u4e2ah1\u53d8\u6210h2\uff0c\u6bcf\u6b21\u5143\u7d20\u53d8\u5316\u90fd\u662f\u5220\u9664\u91cd\u5efa")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},'// \u865a\u62dfdom\u4e2d\u7684type\u5c5e\u6027\u662f\u4e0d\u53ef\u4fee\u6539\u7684\nlet element1 = {\n  "type": "h1",\n  "key": null,\n  "ref": null,\n  "props": {\n    "id": "title",\n    "children": "hello"  // \u662f\u5b57\u7b26\u4e32\n  },\n  "_owner": null,\n  "_store": {}\n}\nObject.freezz(element1)  // \u5bf9\u5bf9\u8c61\u8fdb\u884c\u51bb\u7ed3\uff0c\u4e0d\u53ef\u4ee5\u6dfb\u52a0\u548c\u4fee\u6539\u5bf9\u8c61\u4e2d\u7684\u5c5e\u6027\uff0c\u4e0d\u53ef\u5199\u4e14\u4e0d\u53ef\u6dfb\u52a0\nelement1.type = \'div\'; // \u9519\u8bef\u64cd\u4f5c\uff0creact17\u540e\u4f1a\u62a5\u9519\uff0c17\u4e4b\u524d\u53ea\u662f\u5efa\u8bae\u4e0d\u8981\u4fee\u6539\uff0c\u6dfb\u52a0\u5c5e\u6027\u4e5f\u4e0d\u53ef\u4ee5\u3002\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"react\u53ea\u4f1a\u66f4\u65b0\u5fc5\u8981\u7684\u90e8\u5206\uff0cDOM diff")),Object(o.b)("h2",{id:"\u4e09\u3001\u5177\u4f53\u5b9e\u73b0"},"\u4e09\u3001\u5177\u4f53\u5b9e\u73b0"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"react17\u7684\u53d8\u5316",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"\u4e0d\u518d\u4f7f\u7528React.createElement()\u65b9\u6cd5\u8fdb\u884c\u865a\u62dfdom\u7684\u8f6c\u6362"),Object(o.b)("li",{parentName:"ul"},"\u4f1a\u81ea\u52a8\u5f15\u5165jsx()\u8fdb\u884c\u865a\u62dfdom\u7684\u8f6c\u6362")))),Object(o.b)("h3",{id:"1-reactcreateelement\u5904\u7406\u865a\u62dfdom"},"1. React.createElement()\u5904\u7406\u865a\u62dfdom"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"bable\u4f1a\u628ajsx\u8f6c\u6362\u4e3acreateElement\u51fd\u6570\u5904\u7406\u7684\u6837\u5b50\uff0c\u5728\u901a\u8fc7\u8c03\u7528\u8fd9\u4e2a\u51fd\u6570\uff0c\u8f6c\u6362\u4e3a\u865a\u62dfdom"),Object(o.b)("li",{parentName:"ul"},"createElement\uff0c\u4f20\u5165\u53c2\u6570\u5f53\u524d\u8282\u70b9\u7684\u7c7b\u578b\uff0c\u8282\u70b9\u7684\u5c5e\u6027\uff0c\u513f\u5b50\u548c\u513f\u5b50\u4eec")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"function createElement(type, config, children) {\n  let props = {...config};\n  /* \u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u957f\u5ea6\u5927\u4e8e3\uff0c\u5c31\u628a\u540e\u9762\u7684\u53c2\u6570\u622a\u53d6\u4e3a\u4e00\u4e2a\u6570\u7ec4 */\n  if (arguments.length > 3) {\n    children = Array.prototype.slice.call(arguments, 2);\n  }\n  props.children = children;  // \u5982\u679c\u6ca1\u6709\u76f4\u63a5\u628achildren\u653e\u5230props\u91cc\u9762\n\n  return {\n    type,\n    props\n  }\n}\n\nconst React = {\n  createElement\n}\n\nexport default React;\n")),Object(o.b)("h3",{id:"2-\u5b9e\u73b0\u5bf9\u539f\u751f\u7684\u8282\u70b9\u8fdb\u884c\u6e32\u67d3"},"2. \u5b9e\u73b0\u5bf9\u539f\u751f\u7684\u8282\u70b9\u8fdb\u884c\u6e32\u67d3"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"\u4f20\u5165vdom\uff0c\u548c\u6302\u8f7d\u7684root\u8282\u70b9"),Object(o.b)("li",{parentName:"ol"},"\u628avdom\u8fdb\u884c\u771f\u5b9edom\u7684\u6e32\u67d3"),Object(o.b)("li",{parentName:"ol"},"\u628a\u865a\u62dfdom\u7684\u5c5e\u6027\u66f4\u65b0\u5c5e\u6027\u5230\u771f\u5b9edom\u7684\u5c5e\u6027\u4e0a"),Object(o.b)("li",{parentName:"ol"},"\u628a\u513f\u5b50\u4eec\u4e5f\u90fd\u53d8\u6210\u771f\u5b9e\u7684DOM\u6302\u8f7d\u5230\u81ea\u5df1\u7684dom\u7ed3\u6784\u4e0a\uff0c\u901a\u8fc7\u9012\u5f52\uff0cdom.appendchild"),Object(o.b)("li",{parentName:"ol"},"\u7136\u540e\u628a\u81ea\u5df1\u6302\u8f7d\u5230\u5bb9\u5668\u4e0a")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-js"},"/**\n * @description \u7528\u4e8ereact\u628a\u865a\u62dfdom\u6e32\u67d3\u4e3a\u771f\u5b9e\u8282\u70b9\u5230\u7236\u8282\u70b9\u4e0a\n * @param {object} vdom \u865a\u62dfdom\n * @param {object} container \u771f\u5b9eroot\u8282\u70b9\n */\nfunction render(vdom, container) {\n    /* \u521b\u5efa\u4e00\u4e2a\u771f\u5b9e\u7684dom\u5143\u7d20 */\n    const dom = creactDOM(vdom);\n    /* \u6302\u8f7d\u5230root\u8282\u70b9\u4e0a */\n    container.appendChild(dom)\n};\n\n/**\n * @description \u6839\u636e\u4e0d\u540c\u60c5\u51b5\u521b\u5efa\u771f\u5b9e\u7684dom\u8282\u70b9\n * @param {object} vdom \u865a\u62dfdom\n * @returns \u771f\u5b9e\u7684dom\u8282\u70b9\n */\nfunction creactDOM(vdom) {\n    /* \u5982\u679c\u662f\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\uff0c\u76f4\u63a5\u8fd4\u56de\u6587\u672c\u8282\u70b9 */\n    if(typeof vdom === 'string' || typeof vdom === 'number') {\n        return document.createTextNode(vdom);\n    }\n\n    /* \u5426\u5219\u5c31\u662f\u865a\u62dfdom\uff0c\u628a\u5f53\u524dtype\uff0c\u521b\u5efa\u6210\u65b0\u7684\u771f\u5b9e\u8282\u70b9 */\n    let { type, props } = vdom;\n    let dom = document.createElement(type);\n    /* \u66f4\u65b0\u771f\u5b9e\u8282\u70b9\u4e0a\u9762\u7684\u5c5e\u6027 */\n    updateProps(dom, props);\n    /* \n        \u5904\u7406\u5b69\u5b50\n        1. \u5982\u679c\u5b69\u5b50\u662fstring\uff0c\u6216\u8005 number \u5c31\u76f4\u63a5\u628a\u503c\u8d4b\u503c\u7ed9dom\u7684\u6587\u672c\u8282\u70b9\n        2. \u5982\u679c\u662f\u5355\u72ec\u7684object\uff0c\u8fd8\u8981\u5224\u65ad\u4e00\u4e0b\u5b83\u662f\u4e0d\u662f\u6709type\u5c5e\u6027\uff0c\u5982\u679c\u6709type\u5c5e\u6027\u5c31\u662fvdom\uff0c\u5426\u5219\u53ef\u80fd\u5c31\u662f\u7528\u6237\u968f\u4fbf\u4f20\u5165\u7684\u4e00\u4e2adom\n        3. \u5982\u679cchildren\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u9700\u8981\u628a\u6570\u7ec4\u91cc\u9762\u7684\u6bcf\u4e00\u9879\u62ff\u51fa\u6765\u6302\u8f7d\u5230\u7236\u8282\u70b9\u4e0a\u9762\n        4. \u515c\u5e95\uff1a\u5269\u4e0b\u7684\u90fd\u60c5\u51b5\u628a\u4ed6toString\u8f93\u51fa\n    */\n    if(typeof props.children === 'string' || typeof props.children === 'number') {\n        dom.textContent = props.children;\n    } else if (typeof props.children === 'object' && props.children.type) {\n        render(props.children, dom)\n    } else if (Array.isArray(props.children)) {\n        reconclieChildren(props.children, dom);\n    } else {\n        document.textContent = props.children ? props.children.toString() : '';\n    }\n    return dom;\n}\n\n/**\n * @description \u628a\u771f\u5b9edom\u6302\u8f7d\u4e0a\u5c5e\u6027\u503c\n * @param {element} dom \u771f\u5b9edom\n * @param {object} newProps \u5c5e\u6027\n */\nfunction updateProps(dom, newProps) {\n    for(let key in newProps) {\n        if(key === 'children') continue; // \u5982\u679c\u662fchildren\u8df3\u8fc7\uff0c\u9700\u8981\u5355\u72ec\u5904\u7406\n        if(key === 'style') {  // \u5982\u679c\u662fstyle\uff0c\u56e0\u4e3a\u4f20\u5165\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6240\u4ee5\u9700\u8981\u5faa\u73af\u5904\u7406\u5728dom\u4e0a\u5faa\u73af\u6302\u8f7d\u6bcf\u4e00\u4e2a\u5c5e\u6027\n            let styleObj = newProps.style;\n            for(let attr in styleObj) {\n                dom.style[attr] = styleObj[attr]\n            }\n        } else { // \u5426\u5219\u5c31\u5728dom\u4e0a\u6302\u8f7d\u5176\u4ed6\u5c5e\u6027\uff0cjs\u4e2dclassName\u7f16\u8bd1\u540e\u5c31\u662fclass\u4e86\u3002\n            dom[key] = newProps[key];\n        }\n    }\n}\n\n/**\n * \n * @param {object} childrenVdom \u513f\u5b50\u7684\u6570\u7ec4\u5bf9\u8c61\n * @param {element} parentDom \u7236\u4eb2\u7684\u7236\u8282\u70b9\n */\nfunction reconclieChildren(childrenVdom, parentDom) {\n    for(let i = 0; i <childrenVdom.length; i ++) {\n        let childVdom = childrenVdom[i];\n        render(childVdom, parentDom)\n    }\n}\n\nconst ReactDOM = {\n    render\n}\n\nexport default ReactDOM;\n")),Object(o.b)("h3",{id:"3-\u5b9e\u73b0\u5bf9\u81ea\u5b9a\u4e49\u51fd\u6570\u7ec4\u4ef6\u7684\u6e32\u67d3"},"3. \u5b9e\u73b0\u5bf9\u81ea\u5b9a\u4e49\u51fd\u6570\u7ec4\u4ef6\u7684\u6e32\u67d3"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u81ea\u5b9a\u4e49\u7ec4\u4ef6\u5fc5\u987b\u5927\u5199\u5b57\u6bcd\u5f00\u5934"),Object(o.b)("li",{parentName:"ul"},"\u7ec4\u4ef6\u5fc5\u987b\u5148\u5b9a\u4e49"),Object(o.b)("li",{parentName:"ul"},"\u7ec4\u4ef6\u9700\u8981\u8fd4\u56de\u5e76\u4e14\u53ea\u80fd\u8fd4\u56de\u4e00\u4e2a\u6839\u5143\u7d20")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"/**\n * @description \u6839\u636e\u4e0d\u540c\u60c5\u51b5\u521b\u5efa\u771f\u5b9e\u7684dom\u8282\u70b9\n * @param {object} vdom \u865a\u62dfdom\n * @returns \u771f\u5b9e\u7684dom\u8282\u70b9\n */\nfunction creactDOM(vdom) {\n    /* \u5982\u679c\u662f\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\uff0c\u76f4\u63a5\u8fd4\u56de\u6587\u672c\u8282\u70b9 */\n    if(typeof vdom === 'string' || typeof vdom === 'number') {\n        return document.createTextNode(vdom);\n    }\n\n    /* \u5426\u5219\u5c31\u662f\u865a\u62dfdom\uff0c\u628a\u5f53\u524dtype\uff0c\u521b\u5efa\u6210\u65b0\u7684\u771f\u5b9e\u8282\u70b9 */\n    let { type, props } = vdom;\n+   let dom;\n+   if(typeof type === 'function') {\n+       /* \u901a\u8fc7\u9012\u5f52\u76f4\u63a5\u8fd4\u56de\u4e00\u4e2a\u771f\u5b9e\u7684dom\u8282\u70b9 */\n+       return mountFunctionComponent(vdom);\n+   } else {\n+       dom = document.createElement(type);\n+   }\n    /* \u66f4\u65b0\u771f\u5b9e\u8282\u70b9\u4e0a\u9762\u7684\u5c5e\u6027 */\n    updateProps(dom, props);\n    /* \n        \u5904\u7406\u5b69\u5b50\n        1. \u5982\u679c\u5b69\u5b50\u662fstring\uff0c\u6216\u8005 number \u5c31\u76f4\u63a5\u628a\u503c\u8d4b\u503c\u7ed9dom\u7684\u6587\u672c\u8282\u70b9\n        2. \u5982\u679c\u662f\u5355\u72ec\u7684object\uff0c\u8fd8\u8981\u5224\u65ad\u4e00\u4e0b\u5b83\u662f\u4e0d\u662f\u6709type\u5c5e\u6027\uff0c\u5982\u679c\u6709type\u5c5e\u6027\u5c31\u662fvdom\uff0c\u5426\u5219\u53ef\u80fd\u5c31\u662f\u7528\u6237\u968f\u4fbf\u4f20\u5165\u7684\u4e00\u4e2adom\n        3. \u5982\u679cchildren\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u9700\u8981\u628a\u6570\u7ec4\u91cc\u9762\u7684\u6bcf\u4e00\u9879\u62ff\u51fa\u6765\u6302\u8f7d\u5230\u7236\u8282\u70b9\u4e0a\u9762\n        4. \u515c\u5e95\uff1a\u5269\u4e0b\u7684\u90fd\u60c5\u51b5\u628a\u4ed6toString\u8f93\u51fa\n    */\n    if(typeof props.children === 'string' || typeof props.children === 'number') {\n        dom.textContent = props.children;\n    } else if (typeof props.children === 'object' && props.children.type) {\n        render(props.children, dom)\n    } else if (Array.isArray(props.children)) {\n        reconclieChildren(props.children, dom);\n    } else {\n        document.textContent = props.children ? props.children.toString() : '';\n    }\n    return dom;\n}\n\n+/**\n+* @description \u9012\u5f52\u8c03\u7528\u51fd\u6570\u7ec4\u4ef6\u8fd4\u56de\u4e00\u4e2a\u771f\u662f\u7684dom\n+* @param {object} vdom \u865a\u62dfdom\n+*/\n+ function mountFunctionComponent(vdom) {\n+   let { type, props } = vdom;\n+   let renderVdeom = type(props);  // \u8c03\u7528\u51fd\u6570\u4f20\u5165props\u53c2\u6570\uff0c\u8fd4\u56de\u4e00\u4e2avdom\n+   return creactDOM(renderVdeom); // \u628avdom\u6e32\u67d3\u6210\u771f\u5b9e\u7684dom\u8fd4\u56de\n+}\n")),Object(o.b)("h3",{id:"4-\u6e32\u67d3\u7c7b\u7ec4\u4ef6"},"4. \u6e32\u67d3\u7c7b\u7ec4\u4ef6"),Object(o.b)("blockquote",null,Object(o.b)("ul",{parentName:"blockquote"},Object(o.b)("li",{parentName:"ul"},"\u7c7b\u80fd\u5728\u6784\u9020\u51fd\u6570\u91cc\u9762\u7ed9this.state\u8d4b\u503c\uff0c\u5176\u4ed6\u5730\u65b9\u4f7f\u7528this.setState()\u65b9\u6cd5\u6539\u53d8\u503c\u3002"),Object(o.b)("li",{parentName:"ul"},"\u53ef\u4ee5\u7528state\u5b9a\u4e49\u72b6\u6001\u5bf9\u8c61"),Object(o.b)("li",{parentName:"ul"},"\u5c5e\u6027\u5bf9\u8c61 \u7236\u7ec4\u4ef6\u7ed9\u7684 \u4e0d\u80fd\u6539\u53d8\uff0c\u53ea\u80fd\u8bfb"))),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u5728reactDOM\u4e2d\u6dfb\u52a0\u6e32\u67d3\u7c7b\u7ec4\u4ef6\u7684\u903b\u8f91"),Object(o.b)("li",{parentName:"ul"},"\u521b\u5efa\u4e00\u4e2acomponent.js\u6587\u4ef6\uff0c\u8fd9\u4e2a\u5c31\u662f\u9700\u8981\u7ee7\u627f\u7684\u7c7b\u7ec4\u4ef6"),Object(o.b)("li",{parentName:"ul"},"\u7c7b\u7ec4\u4ef6\u7684\u6e32\u67d3\u6d41\u7a0b\uff1a",Object(o.b)("inlineCode",{parentName:"li"},"\u865a\u62dfdom\u662f\u4e00\u4e2a\u7c7b \u2014\u901a\u8fc7new\u2014> \u83b7\u5f97\u4e00\u4e2a\u5b9e\u4f8b \u2014\u901a\u8fc7\u8c03\u7528\u7c7b\u7ec4\u4ef6\u4e0a\u7684render\u65b9\u6cd5\u2014> \u83b7\u5f97\u539f\u751f\u7684\u865a\u62dfdom\u8282\u70b9 \u2014creactDOM\u2014> \u9012\u5f52\u83b7\u53d6\u771f\u5b9edom")),Object(o.b)("li",{parentName:"ul"},"\u4f1a\u5728\u7c7b\u7ec4\u4ef6\u4e0a\u6302\u8f7d\u539f\u751fvdom \u548c \u81ea\u5df1\u7684\u5b9e\u4f8b\uff0c\u653e\u5728\u81ea\u5df1\u7684\u5c5e\u6027\u4e0a\u3002\u5728\u539f\u751f\u4e0avdom\u4e0a\u6302\u8f7d \u771f\u5b9edom\uff0c\u7528\u4e8ediff\u66f4\u65b0")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"// ReactDOM\n/**\n * @description \u6839\u636e\u4e0d\u540c\u60c5\u51b5\u521b\u5efa\u771f\u5b9e\u7684dom\u8282\u70b9\n * @param {object} vdom \u865a\u62dfdom\n * @returns \u771f\u5b9e\u7684dom\u8282\u70b9\n */\nfunction creactDOM(vdom) {\n    /* \u5982\u679c\u662f\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\uff0c\u76f4\u63a5\u8fd4\u56de\u6587\u672c\u8282\u70b9 */\n    if(typeof vdom === 'string' || typeof vdom === 'number') {\n        return document.createTextNode(vdom);\n    }\n\n    /* \u5426\u5219\u5c31\u662f\u865a\u62dfdom\uff0c\u628a\u5f53\u524dtype\uff0c\u521b\u5efa\u6210\u65b0\u7684\u771f\u5b9e\u8282\u70b9 */\n    let { type, props } = vdom;\n    let dom;\n    if(typeof type === 'function') {\n+       /* \u5224\u65ad\u662f\u5426\u6709\u662f\u4e0d\u662f\u7c7b\u7ec4\u4ef6\u8fd9\u4e2a\u5c5e\u6027\uff0c\u5982\u679c\u6709\u8fd9\u4e2a\u5c5e\u6027\u5c31\u505a\u7c7b\u7ec4\u4ef6\u7684\u5904\u7406\uff0c\u5426\u5219\u5c31\u662f\u51fd\u6570\u7ec4\u4ef6\u7684\u5904\u7406 */\n+       if(type.isReactComponent) { // \u8fd9\u4e2a\u5c5e\u6027\u662f\u5199\u5728\u7c7b\u4e0a\u9762\u7684\u9759\u6001\u5c5e\u6027\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u6253\u70b9\u4f7f\u7528\n+           return mountClassComponent(vdom);\n+       } else {\n+           return mountFunctionComponent(vdom);\n+       }\n    } else {\n        dom = document.createElement(type);\n    }\n    /* \u66f4\u65b0\u771f\u5b9e\u8282\u70b9\u4e0a\u9762\u7684\u5c5e\u6027 */\n    updateProps(dom, props);\n    /* \n        \u5904\u7406\u5b69\u5b50\n        1. \u5982\u679c\u5b69\u5b50\u662fstring\uff0c\u6216\u8005 number \u5c31\u76f4\u63a5\u628a\u503c\u8d4b\u503c\u7ed9dom\u7684\u6587\u672c\u8282\u70b9\n        2. \u5982\u679c\u662f\u5355\u72ec\u7684object\uff0c\u8fd8\u8981\u5224\u65ad\u4e00\u4e0b\u5b83\u662f\u4e0d\u662f\u6709type\u5c5e\u6027\uff0c\u5982\u679c\u6709type\u5c5e\u6027\u5c31\u662fvdom\uff0c\u5426\u5219\u53ef\u80fd\u5c31\u662f\u7528\u6237\u968f\u4fbf\u4f20\u5165\u7684\u4e00\u4e2adom\n        3. \u5982\u679cchildren\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c\u9700\u8981\u628a\u6570\u7ec4\u91cc\u9762\u7684\u6bcf\u4e00\u9879\u62ff\u51fa\u6765\u6302\u8f7d\u5230\u7236\u8282\u70b9\u4e0a\u9762\n        4. \u515c\u5e95\uff1a\u5269\u4e0b\u7684\u90fd\u60c5\u51b5\u628a\u4ed6toString\u8f93\u51fa\n    */\n    if(typeof props.children === 'string' || typeof props.children === 'number') {\n        dom.textContent = props.children;\n    } else if (typeof props.children === 'object' && props.children.type) {\n        render(props.children, dom)\n    } else if (Array.isArray(props.children)) {\n        reconclieChildren(props.children, dom);\n    } else {\n        document.textContent = props.children ? props.children.toString() : '';\n    }\n    return dom;\n}\n\n+/**\n+ * @description \u7528\u4e8e\u6e32\u67d3class\u7ec4\u4ef6\n+ * @param {object} vdom \u865a\u62dfdom\n+ * @returns \u771f\u5b9e\u7684dom\u8282\u70b9\u7528\u4e8e\u6e32\u67d3\n+ */\n+function mountClassComponent(vdom) {\n+    let { type, props} = vdom;  // \u7ed3\u6784\u865a\u62dfdom\u4e2d\u7684\u53c2\u6570\n+    let calssinstence = new type(props); // \u5b9e\u4f8b\u5316\u7c7b\u7ec4\u4ef6\n+    let renderdom = calssinstence.render();  // \u8c03\u7528\u91cc\u9762\u7684render\u65b9\u6cd5\uff0c\u62ff\u51fa\u5f53\u524d\u7684\u539f\u751f\u7684\u865a\u62df\u8282\u70b9\n+    let dom = creactDOM(renderdom)  // \u901a\u8fc7creactDom\u8fdb\u884c\u9012\u5f52\u6e32\u67d3\n+    calssinstence.dom = dom  // \u518d\u628a\u771f\u5b9e\u7684dom\u8282\u70b9\u6302\u8f7d\u5230\u5b9e\u4f8b\u4e0a\uff0c\u7528\u4e8e\u66f4\u65b0\n+    return dom;\n+}\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"// Component.js\nexport default class Component {\n    /* \u52a0\u4e00\u4e2a\u9759\u6001\u5c5e\u6027\u5728ReactDOM\u6e32\u67d3\u65f6\u5224\u65ad\u662f\u5426\u662f\u7c7b\u7ec4\u4ef6\uff0c\u8fdb\u884c\u5bf9\u5e94\u7684\u6e32\u67d3 */\n    static isReactComponent = true;\n    constructor(props) {\n        // \u63a5\u53d7super(props),\u4e2d\u7684props\u7ee7\u627f\u5c5e\u6027\n        this.props = props\n    }\n    render() {\n        // \u62bd\u8c61\u65b9\u6cd5\uff0c\u7236\u7c7b\u53ea\u9700\u8981\u5b9a\u4e49\uff0c\u7136\u540e\u5b50\u7c7b\u5fc5\u987b\u5b9e\u73b0\u624d\u53ef\u4ee5\n        throw new Error('\u62bd\u8c61\u65b9\u6cd5\uff0c\u9700\u8981\u5b50\u7c7b\u5b9e\u73b0')\n    }\n}\n")),Object(o.b)("h3",{id:"5-\u7c7b\u7ec4\u4ef6\u7684\u66f4\u65b0\uff08\u65e0diff\uff09"},"5. \u7c7b\u7ec4\u4ef6\u7684\u66f4\u65b0\uff08\u65e0diff\uff09"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u7ed9\u771f\u5b9e\u7684dom\u7ed1\u5b9a\u4e8b\u4ef6"),Object(o.b)("li",{parentName:"ul"},"\u901a\u8fc7setState\u65b9\u6cd5\uff0c\u8ba9\u7ec4\u4ef6\u66f4\u65b0")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"// ReactDOM\n/**\n * @description \u628a\u771f\u5b9edom\u6302\u8f7d\u4e0a\u5c5e\u6027\u503c\n * @param {element} dom \u771f\u5b9edom\n * @param {object} newProps \u5c5e\u6027\n */\nfunction updateProps(dom, newProps) {\n    for(let key in newProps) {\n        if(key === 'children') continue; // \u5982\u679c\u662fchildren\u8df3\u8fc7\uff0c\u9700\u8981\u5355\u72ec\u5904\u7406\n        if(key === 'style') {  // \u5982\u679c\u662fstyle\uff0c\u56e0\u4e3a\u4f20\u5165\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6240\u4ee5\u9700\u8981\u5faa\u73af\u5904\u7406\u5728dom\u4e0a\u5faa\u73af\u6302\u8f7d\u6bcf\u4e00\u4e2a\u5c5e\u6027\n            let styleObj = newProps.style;\n            for(let attr in styleObj) {\n                dom.style[attr] = styleObj[attr]\n            }\n+       } else if (key.startsWith('on')) {\n+         // \u7ed9\u771f\u5b9e\u7684dom\u6dfb\u52a0\u4e8b\u4ef6\n+           dom[key.toLocaleLowerCase()] = newProps[key]\n+       } else { // \u5426\u5219\u5c31\u5728dom\u4e0a\u6302\u8f7d\u5176\u4ed6\u5c5e\u6027\uff0cjs\u4e2dclassName\u7f16\u8bd1\u540e\u5c31\u662fclass\u4e86\u3002\n            dom[key] = newProps[key];\n        }\n    }\n}\n")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"// Component.js\nimport { creactDOM } from './react-dom'\n\nexport default class Component {\n    /* \u52a0\u4e00\u4e2a\u9759\u6001\u5c5e\u6027\u5728ReactDOM\u6e32\u67d3\u65f6\u5224\u65ad\u662f\u5426\u662f\u7c7b\u7ec4\u4ef6\uff0c\u8fdb\u884c\u5bf9\u5e94\u7684\u6e32\u67d3 */\n    static isReactComponent = true;\n    constructor(props) {\n        // \u63a5\u53d7super(props),\u4e2d\u7684props\u7ee7\u627f\u5c5e\u6027\n        this.props = props;\n    }\n\n+   setState(partialState) {\n+       // \u5148\u5b58\u5230\u4e00\u4e2a\u65b0\u7684\u4f4d\u7f6e\n+       let state = this.state;\n+       // \u901a\u8fc7\u8986\u76d6\uff0c\u8bbe\u7f6e\u6700\u65b0\u7684state\n+       this.state = {...state, ...partialState};\n+       let newVdom = this.render();  // \u8fd9\u4e2a\u65b9\u6cd5\u662f\u513f\u5b50\u8c03\u7528\u7684\uff0c\u6240\u4ee5\u8fd9\u91cc\u7684this\u6307\u5411\u7684\u662f\u513f\u5b50\uff0c\u8c03\u7528\u513f\u5b50\u7684render\u65b9\u6cd5\uff0c\u62ff\u5230\u6700\u8fd1\u7684\u865a\u62dfdom\n+       updateClassComponent(this,newVdom);\n+   }\n\n    render() {\n        // \u62bd\u8c61\u65b9\u6cd5\uff0c\u7236\u7c7b\u53ea\u9700\u8981\u5b9a\u4e49\uff0c\u7136\u540e\u5b50\u7c7b\u5fc5\u987b\u5b9e\u73b0\u624d\u53ef\u4ee5,js\u4e2d\u6ca1\u6709\u660e\u786e\u7684\u8981\u6c42\uff0cts\u4e2d\u6709\u53ef\u4ee5\u4f7f\u7528\u7684\u5173\u952e\u5b57\n        throw new Error('\u62bd\u8c61\u65b9\u6cd5\uff0c\u9700\u8981\u5b50\u7c7b\u5b9e\u73b0')\n    }\n}\n\n+/**\n+ * @description \u7528\u6765\u66f4\u65b0\u5f53\u524d\u7684\u754c\u9762\n+ * @param {new} classInstance \u5f53\u524d\u8c03\u7528setState \u5b50\u7ec4\u4ef6\u7684\u5b9e\u4f8b\n+ * @param {object} newVdom \u62ff\u5230\u7684\u6700\u65b0\u7684\u865a\u62dfdom\n+ */\n+function updateClassComponent(classInstance, newVdom) {\n+    let oldDom = classInstance.dom;  // \u53d6\u51fa\u4e4b\u524d\u5728\u6e32\u67d3\u65f6\u5b58\u5165\u7684\u8001\u7684dom\u8282\u70b9\n+    let newDom = creactDOM(newVdom);  // \u901a\u8fc7\u4ececreactDOM\u521b\u5efa\u771f\u5b9e\u7684dom\u8282\u70b9\n+    oldDom.parentNode.replaceChild(newDom, oldDom);  // \u7136\u540e\u901a\u8fc7olddom\u627e\u5230\u7236\u4eb2\u8282\u70b9\u76f4\u63a5\u66ff\u6362\n+    classInstance.dom = newDom;  // \u518d\u628a\u6700\u65b0\u7684\u8282\u70b9\u8d4b\u503c\u7ed9\u5b9e\u4f8b\u8282\u70b9\u4e0a\n+}\n")),Object(o.b)("h3",{id:"6-\u7c7b\u7ec4\u4ef6\u7684\u6279\u91cf\u66f4\u65b0"},"6. \u7c7b\u7ec4\u4ef6\u7684\u6279\u91cf\u66f4\u65b0"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"react\u4e2d\uff0c\u4e8b\u4ef6\u66f4\u65b0\u662f\u5f02\u6b65\u7684\uff0c\u662f\u6279\u91cf\u7684\uff0c\u5728\u8c03\u7528state\u4e4b\u540e\u72b6\u6001\u5e76\u6ca1\u6709\u7acb\u523b\u66f4\u65b0\uff0c\u800c\u662f\u5148\u7f13\u5b58\u8d77\u6765\uff0c\u7b49\u4e8b\u4ef6\u51fd\u6570\u5b8c\u6210\u540e\uff0c\u5728\u8fdb\u884c\u6279\u91cf\u66f4\u65b0\uff0c\u4e00\u6b21\u66f4\u65b0\u91cd\u65b0\u6e32\u67d3\u3002"),Object(o.b)("li",{parentName:"ul"},"\u5982\u679c\u975ereact\u63a7\u5236\uff0c\u6bd4\u5982\u8bf4setTimeout\uff0cqueueMicrotask\uff0cPromise\uff0c\u7b49\u56de\u8c03\u51fd\u6570\u4e2d\uff0c\u5c31\u4e0d\u662f\u6279\u91cf\u66f4\u65b0\u4e86\u3002\u53ea\u6709react\u7684\u5408\u6210\u4e8b\u4ef6\uff08\u4e8b\u4ef6\u5904\u7406\u51fd\u6570\u548c\u751f\u547d\u5468\u671f\uff09\u4e2d\u624d\u4f1a\u8fdb\u884c\u6279\u91cf\u66f4\u65b0\u3002")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"/* \u8fd9\u6837\u5728\u4e8b\u4ef6\u51fd\u6570\u4e2d\u5199\u591a\u4e2astate\uff0c\u6bcf\u4e00\u4e2astate\uff0c\u4e5f\u90fd\u4f1a\u751f\u6548, \u4f46\u662f\u4e5f\u662f\u6279\u91cf\u66f4\u65b0\u5f02\u6b65 */\nthis.setState((lastState) => ({number: lastState + 1}), () => {\n  /* \u5728state\u7684\u56de\u8c03\u51fd\u6570\u4e2d\uff0c\u4e5f\u662f\u6279\u91cf\u66f4\u65b0\uff0c\u4ed6\u4f1a\u7b49\u6240\u6709\u7684state\u90fd\u66f4\u65b0\u5b8c\u6210\u4e4b\u540e\u518d\u6267\u884c\u56de\u8c03\u51fd\u6570\uff0c\u56de\u8c03\u51fd\u6570\u4e5f\u4f9d\u65e7\u662f\u6279\u91cf\u66f4\u65b0 */\n  console.log(this.state.number) // 2\n})  //1\nconsole.log(this.state.number)  // 0\nthis.setState((lastState) => ({number: lastState + 1}), () => {\n  console.log(this.state.number) // 2\n})  //2\nconsole.log(this.state.number)  // 0\n\n/* \u975ereact\u63a7\u5236\uff0c\u5c5e\u4e8e\u5f02\u6b65\u64cd\u4f5c\uff0c\u8fd9\u6837\u4f1a\u4f7f\u5f53\u524d\u72b6\u6001\u8131\u79bbreact\u6279\u91cf\u66f4\u65b0\u7684\u63a7\u5236\uff0c\u6bcf\u6b21\u6253\u5370\u90fd\u4f1a\u8f93\u51fa\u6700\u65b0\u7684\u503c */\nPromise.resolve().then(() => {\n  this.setState((lastState) => ({number: lastState + 1}))  //3\n  console.log(this.state.number) // 3\n})\n")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"\u5904\u7406\u6279\u91cf\u66f4\u65b0")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"\u6d41\u7a0b\u56fe\n",Object(o.b)("img",{alt:"image",src:t(194).default}))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"\u4e00\u4e2a",Object(o.b)("inlineCode",{parentName:"p"},"updater"),"\u7c7b\u6765\u5904\u7406\u72b6\u6001\u7684\u6279\u91cf\u66f4\u65b0")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"\u7528\u4e00\u4e2a",Object(o.b)("inlineCode",{parentName:"p"},"updateQueue"),"\u961f\u5217\u6765\u5b58\u50a8\u6279\u91cf\u66f4\u65b0\u7684\u5185\u5bb9\u548c\u662f\u5426\u9700\u8981\u6279\u91cf\u66f4\u65b0"))),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"// Component.js(\u5904\u7406\u975e\u6279\u91cf\u66f4\u65b0\uff0c\u6279\u91cf\u66f4\u65b0\u9700\u8981\u518d\u6dfb\u52a0\u5408\u6210\u4e8b\u4ef6\u903b\u8f91)\nimport { creactDOM } from './react-dom'\n\n/* \u66f4\u65b0\u961f\u5217 */\n+export let updateQueue = {\n+    isBatchingUpdate: false,  // \u5224\u65ad\u662f\u5426\u9700\u8981\u6279\u91cf\u66f4\u65b0\uff0c\u9ed8\u8ba4false\u4e0d\u9700\u8981\u6279\u91cf\u66f4\u65b0\n+    updaters: []  // \u66f4\u65b0\u961f\u5217\uff0c\u653e\u5165\u5f53\u524d\u9700\u8981\u6279\u91cf\u66f4\u65b0\u7684\u5185\u5bb9\n+    batchUpdate() {\n+        for(let updater of updateQueue.updaters) {\n+            updater.updateCompnent()  // \u5faa\u73af\u66f4\u65b0\u7ec4\u4ef6\u89c6\u56fe\n+        }\n+        updateQueue.isBatchingUpdate = false;  // \u4e4b\u540e\u7f6e\u56de\u6700\u521d\u7684\u72b6\u6001\n+        updateQueue.updaters.length = 0;  // \u628a\u5f53\u524d\u6279\u91cf\u66f4\u65b0\u7684\u961f\u5217\u6e05\u7a7a\n+    }\n+}\n+\n+/* \u521b\u5efa\u4e00\u4e2a\u66f4\u65b0\u7c7b */\n+class Updater {\n+    constructor(classInstance) {\n+        this.classInstance = classInstance; // \u8fd9\u4e2a\u662f\u5f53\u524d\u7684\u5b50\u7c7b\u5b9e\u4f8b\n+        this.pendingState = [];  // setState\u4f20\u5165\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u53ef\u80fd\u662f\u5bf9\u8c61\u6216\u8005\u51fd\u6570\n+        this.callbacks = []  // setState\u4f20\u5165\u7684callback\n+    }\n+\n+    /* \u6dfb\u52a0\u65b0\u7684state */\n+    addState(partialState, callback){\n+        this.pendingState.push(partialState);  // \u628astate\u653e\u5230\u961f\u5217\u5b58\u8d77\u6765\n+        if(typeof callback === 'function'){\n+            this.callbacks.push(callback);  // \u628a\u56de\u8c03\u653e\u5230\u961f\u5217\u4e2d\n+        }\n+        if(updateQueue.isBatchingUpdate) {  // \u5982\u679c\u9700\u8981\u6279\u91cf\u66f4\u65b0\n+            updateQueue.updaters.push(this)  // \u5c31\u628a\u5f53\u524d\u7684state\u653e\u5230\u961f\u5217\u4e2d\n+        } else { \n+            /* \u5426\u5219\u5c31\u76f4\u63a5\u66f4\u65b0\u5f53\u524d\u7684\u5b9e\u4f8b */\n+            this.updateClassComponent(this.classInstance);\n+        }\n+    }\n+\n+    updateClassComponent() {\n+        let { classInstance, pendingState, callbacks } = this;\n+        // \u5982\u679c\u5f53\u524d\u961f\u5217\u4e2d\u6709\u72b6\u6001\n+        if( pendingState.length > 0 ) {\n+            classInstance.state = this.getState();  // \u66f4\u65b0\u5b9e\u4f8b\u7684state\n+            classInstance.forceUpdate()  // \u66b4\u529b\u66f4\u65b0\u7ec4\u4ef6\n+            callbacks.forEach(cb => cb()); // \u8c03\u7528callback\n+            callbacks.length = 0; // callback\u6e05\u7a7a\n+        }\n+    }\n+\n+    /* \u83b7\u5f97\u5f53\u524d\u6700\u65b0\u7684\u72b6\u6001\u503c */\n+    getState () {\n+        let { classInstance, pendingState } = this;\n+        let { state } = classInstance; // \u4ece\u5b9e\u4f8b\u91cc\u9762\u53d6\u51fa\u65e7\u7684\u72b6\u6001\n+        pendingState.forEach(nextState => { // \u5728\u6240\u6709\u7684state\u4e2d\uff0c\u53d6\u51fa\u7528\u6237\u4f20\u5165\u7684\u6700\u65b0\u7684\u72b6\u6001\n+            /* \u5982\u679c\u7528\u6237\u4f20\u5165\u7684\u6700\u65b0\u7684\u72b6\u6001\u662f\u51fd\u6570\u7684\u8bdd */\n+            if(typeof nextState === 'function') {\n+                /* \u8c03\u7528\u51fd\u6570\uff0c\u53d6\u51fa\u5f53\u524d\u7684\u6700\u65b0\u503c */\n+                nextState = nextState(state)\n+            }\n+            /* \u628a\u4e4b\u524d\u7684\u72b6\u6001\u548c\u6700\u65b0\u7684\u72b6\u6001\u5408\u5e76 */\n+            state = {...state, ...nextState};\n+        })\n+        pendingState.length = 0;  // \u6279\u91cf\u66f4\u65b0\u540e\u628a\u5b58\u5165\u72b6\u6001\u7684\u6570\u7ec4\u6e05\u7a7a\n+        return state;\n+    }\n+}\n\nexport default class Component {\n    /* \u52a0\u4e00\u4e2a\u9759\u6001\u5c5e\u6027\u5728ReactDOM\u6e32\u67d3\u65f6\u5224\u65ad\u662f\u5426\u662f\u7c7b\u7ec4\u4ef6\uff0c\u8fdb\u884c\u5bf9\u5e94\u7684\u6e32\u67d3 */\n    static isReactComponent = true;\n    constructor(props) {\n        // \u63a5\u53d7super(props),\u4e2d\u7684props\u7ee7\u627f\u5c5e\u6027\n        this.props = props;\n        this.state = {};\n+       this.updater = new Updater(this)\n    }\n\n+   setState(partialState, callback) {\n+       // \u66f4\u65b0\u8c03\u7528update\u5b9e\u4f8b\u4e0a\u7684\u65b9\u6cd5\n+       this.updater.addState(partialState, callback);\n+   }\n+   /* \u66b4\u529b\u66f4\u65b0 */\n+   forceUpdate() {\n+       let newVdom = this.render();  // \u62ff\u5230\u6700\u65b0\u7684\u865a\u62dfdom\n+       updateClassComponent(this, newVdom); // \u66ff\u6362\u66f4\u65b0\n+   }\n\n    render() {\n         // \u62bd\u8c61\u65b9\u6cd5\uff0c\u7236\u7c7b\u53ea\u9700\u8981\u5b9a\u4e49\uff0c\u7136\u540e\u5b50\u7c7b\u5fc5\u987b\u5b9e\u73b0\u624d\u53ef\u4ee5,js\u4e2d\u6ca1\u6709\u660e\u786e\u7684\u8981\u6c42\uff0cts\u4e2d\u6709\u53ef\u4ee5\u4f7f\u7528\u7684\u5173\u952e\u5b57\n        throw new Error('\u62bd\u8c61\u65b9\u6cd5\uff0c\u9700\u8981\u5b50\u7c7b\u5b9e\u73b0')\n    }\n}\n\n/**\n * @description \u7528\u6765\u66f4\u65b0\u5f53\u524d\u7684\u754c\u9762\n * @param {new} classInstance \u5f53\u524d\u8c03\u7528setState \u5b50\u7ec4\u4ef6\u7684\u5b9e\u4f8b\n * @param {object} newVdom \u62ff\u5230\u7684\u6700\u65b0\u7684\u865a\u62dfdom\n */\nfunction updateClassComponent(classInstance, newVdom) {\n    let oldDom = classInstance.dom;  // \u53d6\u51fa\u4e4b\u524d\u5728\u6e32\u67d3\u65f6\u5b58\u5165\u7684\u8001\u7684dom\u8282\u70b9\n    let newDom = creactDOM(newVdom);  // \u901a\u8fc7\u4ececreactDOM\u521b\u5efa\u771f\u5b9e\u7684dom\u8282\u70b9\n    oldDom.parentNode.replaceChild(newDom, oldDom);  // \u7136\u540e\u901a\u8fc7olddom\u627e\u5230\u7236\u4eb2\u8282\u70b9\u76f4\u63a5\u66ff\u6362\n    classInstance.dom = newDom;  // \u518d\u628a\u6700\u65b0\u7684\u8282\u70b9\u8d4b\u503c\u7ed9\u5b9e\u4f8b\u8282\u70b9\u4e0a\n}\n")),Object(o.b)("h3",{id:"7-\u5408\u6210\u4e8b\u4ef6\u5904\u7406"},"7. \u5408\u6210\u4e8b\u4ef6\u5904\u7406"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u5728react\u4e2d\u4f1a\u628a\u539f\u751f\u7684\u4e8b\u4ef6\u8fdb\u884c\u5904\u7406"),Object(o.b)("li",{parentName:"ul"},"\u4e3a\u4e86\u7edf\u4e00\u505a\u517c\u5bb9\u6027\u5904\u7406"),Object(o.b)("li",{parentName:"ul"},"\u4e3a\u4e86\u6dfb\u52a0\u4e00\u4e9b\u5176\u4ed6\u529f\u80fd\uff0c\u6279\u91cf\u5904\u7406\uff0c\u4e8b\u4ef6\u5192\u6ce1\uff0c aop\u5207\u7247\u7f16\u7a0b")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"// react-dom.js\n// \u5728\u6e32\u67d3\u51fd\u6570\u5904\u7406\u4e8b\u4ef6\u7684\u4f4d\u7f6e\uff0c\u8c03\u7528react\u5904\u7406\u8fc7\u7684\u51fd\u6570\n/**\n * @description \u628a\u771f\u5b9edom\u6302\u8f7d\u4e0a\u5c5e\u6027\u503c\n * @param {element} dom \u771f\u5b9edom\n * @param {object} newProps \u5c5e\u6027\n */\nfunction updateProps(dom, newProps) {\n    for(let key in newProps) {\n        if(key === 'children') continue; // \u5982\u679c\u662fchildren\u8df3\u8fc7\uff0c\u9700\u8981\u5355\u72ec\u5904\u7406\n        if(key === 'style') {  // \u5982\u679c\u662fstyle\uff0c\u56e0\u4e3a\u4f20\u5165\u7684\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u6240\u4ee5\u9700\u8981\u5faa\u73af\u5904\u7406\u5728dom\u4e0a\u5faa\u73af\u6302\u8f7d\u6bcf\u4e00\u4e2a\u5c5e\u6027\n            let styleObj = newProps.style;\n            for(let attr in styleObj) {\n                dom.style[attr] = styleObj[attr]\n            }\n        } else if (key.startsWith('on')) {\n            // \u7ed9\u771f\u5b9e\u7684dom\u6dfb\u52a0\u4e8b\u4ef6\n            // dom[key.toLocaleLowerCase()] = newProps[key]\n+           addEvent(dom, key.toLocaleLowerCase(), newProps[key])\n        } else { // \u5426\u5219\u5c31\u5728dom\u4e0a\u6302\u8f7d\u5176\u4ed6\u5c5e\u6027\uff0cjs\u4e2dclassName\u7f16\u8bd1\u540e\u5c31\u662fclass\u4e86\u3002\n            dom[key] = newProps[key];\n        }\n    }\n}\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u662f\u5426\u5f00\u542f\u6279\u91cf\u66f4\u65b0")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"// Compnent.js\n// \u6dfb\u52a0\u6279\u91cf\u66f4\u65b0\u7684\u903b\u8f91\u5904\u7406\n/* \u66f4\u65b0\u961f\u5217 */\nexport let updateQueue = {\n    isBatchingUpdate: false,  // \u5224\u65ad\u662f\u5426\u9700\u8981\u6279\u91cf\u66f4\u65b0\uff0c\u9ed8\u8ba4false\u4e0d\u9700\u8981\u6279\u91cf\u66f4\u65b0\n    updaters: new Set(),  // \u66f4\u65b0\u961f\u5217\uff0c\u653e\u5165\u5f53\u524d\u9700\u8981\u6279\u91cf\u66f4\u65b0\u7684\u5185\u5bb9\n+   batchUpdate(){ // \u6279\u91cf\u66f4\u65b0\n+       // \u62ff\u51fa\u5f53\u524d\u6279\u91cf\u66f4\u65b0\u7684\u6bcf\u4e00\u9879\uff0c\u8fdb\u884c\u7edf\u4e00\u66f4\u65b0\n+       for(let updater of this.updaters) {\n+           updater.updateClassComponent()\n+       }\n+       this.isBatchingUpdate = false; // \u91cd\u7f6e\u56de\u975e\u6279\u91cf\u66f4\u65b0\u6a21\u5f0f\n+   }\n}\n")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"\u5904\u7406\u4e8b\u4ef6")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-jsx"},"// event.js\nimport { updateQueue } from './Component'\n\n/**\n * @description \u5408\u6210\u4e8b\u4ef6\uff0c \u5bf9\u539f\u751f\u4e8b\u4ef6\u8fdb\u884c\u5305\u88f9\n * 1. \u5904\u7406\u517c\u5bb9\u6027\uff0c\u5c06event\u4e8b\u4ef6\u5bf9\u8c61\uff0c\u5bf9\u4e0d\u540c\u6d4f\u89c8\u5668\u8fdb\u884c\u5904\u7406\n * 2. \u53ef\u4ee5\u5728\u51fd\u6570\u5904\u7406\u4e4b\u524d\u548c\u4e4b\u540e\u505a\u4e00\u4e9b\u4e8b\u60c5\uff0c\u53ef\u4ee5\u7edf\u4e00\u7ba1\u7406\u4e8b\u4ef6\uff0c\u6dfb\u52a0\u6279\u91cf\u5904\u7406\uff0c\u4e8b\u4ef6\u5192\u6ce1aop\u5207\u7247\u7f16\u7a0b\u7b49\u7b49\n * @param {element} dom \u771f\u5b9edom\n * @param {string} eventType \u5f53\u524d\u662f\u4ec0\u4e48\u4e8b\u4ef6onclick...\n * @param {function} listener \u4e8b\u4ef6\u7684\u56de\u8c03\u51fd\u6570\n */\nexport function addEvent(dom, eventType, listener) {\n    /* \u5728\u771f\u5b9e\u7684dom\u5143\u7d20\u4e0a\u6dfb\u52a0store\u5c5e\u6027\uff0c\u5982\u679c\u6709\u5c31\u4e0d\u5728\u91cd\u65b0\u6dfb\u52a0\u4e86 */\n    let store = dom.store || (dom.store = {});\n    /* \u8ba9\u5f53\u524d\u7684\u4e8b\u4ef6\u540d\u5b57\u548c\u65b9\u6cd5\u505a\u4e00\u4e2a\u5173\u8054 */\n    store[eventType] = listener; // store.onClick = handleClick\n    if(!document[eventType]) {\n        /* \u4e8b\u4ef6\u59d4\u6258\u3002\u5982\u679c\u5728document\u4e0a\uff0c\u6709\u8fd9\u4e2a\u5143\u7d20\uff0c\u4e0d\u7ba1\u662f\u90a3\u4e2a\u4e8b\u4ef6\u4e0a\u7ed1\u5b9a\u7684\uff0c\u90fd\u4ee3\u7406\u5230document\u4e0a */\n        document[eventType] = dispatchEvent;\n    }\n}\n\n/**\n * @description \u901a\u8fc7document.onclick = function(e){} \u8fd9\u79cd\u65b9\u5f0f\u62ff\u5230\u539f\u751f\u7684event\u5bf9\u8c61\uff0c \u5728\u8fd9\u4e2a\u51fd\u6570\u4e2d\u505a\u5bf9\u5e94\u5904\u7406\n * @param {object} event \u539f\u751f\u7684\u4e8b\u4ef6\u5bf9\u8c61\n */\nlet syntheticEvent = { // \u8fd9\u4e2a\u5bf9\u8c61\u5c31\u662freact\u5408\u6210\u4e8b\u4ef6\u7684event\n    stopping: false,\n    stop() {  // \u7528\u6237\u624b\u52a8\u8c03\u7528stop\u65b9\u6cd5\u963b\u6b62\u5192\u6ce1\n        this.stopping = true,\n        console.log('\u963b\u6b62\u5192\u6ce1');\n    }\n};  // \u5408\u6210\u4e8b\u4ef6\u662f\u5355\u4f8b\u5bf9\u8c61\nfunction dispatchEvent(event) {\n    /* target\u662f\u539f\u751fdom\uff0c\u7ed1\u5b9a\u5728\u4ec0\u4e48\u4e0a\u9762\u5c31\u662f\u6309\u4e2adom\u5143\u7d20\n       type\u662f\u5f53\u524d\u7ed1\u5b9a\u7684\u662f\u90a3\u4e2a\u65f6\u95f4\u65b9\u6cd5\u7684\u540d\u5b57\uff0c\u4f8b\u5982\uff1aclick\n    */\n    let { target, type } = event;\n    let eventType = `on${type}`;\n\n    updateQueue.isBatchingUpdate = true;  // \u628a\u961f\u5217\u8bbe\u7f6e\u4e3a\u6279\u91cf\u66f4\u65b0\u6a21\u5f0f\n    createSyntheticEvent(event);\n    /* \u5904\u7406\u4e8b\u4ef6\u5192\u6ce1 */\n    console.dir(target);\n    while(target) {\n        let {store} = target;  // \u628a\u521a\u624d\u5b58\u5165\u771f\u5b9edom\u7684\u4e8b\u4ef6\u51fd\u6570\u62ff\u51fa\u6765\n        /* \u5982\u679cdom\u4e0a\u6709\u5b58\u5165\u8fd9\u4e2asotre\u7684\u8bdd\uff0c\u800c\u4e14store\u91cc\u9762\u6709\u5f53\u524d\u5b58\u5165\u7684\u8fd9\u4e2a\u4e8b\u4ef6\u7684\u8bdd\uff0c\u5c31\u53d6\u51fa\u6765\u7ed9listener\u8d4b\u503c */\n        let listener = store && store[eventType];\n        /* \u8fd9\u662f\u5224\u65ad\u662f\u5426\u6709\u8fd9\u4e2a\u51fd\u6570\uff0c\u5982\u679c\u6709\u5c31\u628a\u7528\u5f53\u524d\u7684\u8fd9\u4e2a\u4e8b\u4ef6\u505a\u70b9\u51fb\u5904\u7406\uff0c\u628a\u4e8b\u4ef6\u53c2\u6570\u90fd\u4f20\u8fc7\u53bb\u7ed9\u5f53\u524d\u7684button\u7684\u4e8b\u4ef6\u51fd\u6570 */\n        listener && listener.call(target, syntheticEvent);\n        /* \u5982\u679c\u7528\u6237\u624b\u52a8\u8c03\u7528\u4e86\u963b\u6b62\u5192\u6ce1\u7684\u65b9\u6cd5\uff0c\u76f4\u63a5\u505c\u6b62\u5faa\u73af\u5411\u4e0a\u67e5\u627e */\n        if(syntheticEvent.stopping) {\n            break; \n        }\n        // \u5982\u679c\u6709target\u7684\u8bdd\uff0c\u8ba9target\u7b49\u4e8e\u81ea\u5df1\u7684\u7236\u4eb2\uff0c\u8fd9\u6837\u4f1a\u4e00\u76f4\u9012\u5f52\u5411\u4e0a\u627e\u5230document\u8282\u70b9\uff0c\u8fd9\u4e2a\u65f6\u5019\u4ed6\u7684\u7236\u4eb2\u662fnull\uff0c\u8df3\u51fa\u5faa\u73af\n        target = target.parentNode; \n    }\n    for(let key in syntheticEvent) {\n        /* \u4f7f\u7528\u5b8c\u6210\u4e4b\u540e\uff0c\u5728\u5c06\u5f53\u524d\u7684\u4e8b\u4ef6\u5bf9\u8c61\u5168\u90e8\u6e05\u9664\uff0c\u590d\u7528\u5f53\u524d\u8fd9\u4e00\u4e2a\u5bf9\u8c61 */\n        syntheticEvent[key] = null;\n    }\n    updateQueue.batchUpdate();\n}\n\n/**\n * @description \u5c06\u539f\u751f\u7684\u4e8b\u4ef6\u514b\u9686\u4e00\u4efd\u5230react\u81ea\u5df1\u7684\u4e8b\u4ef6\u5bf9\u8c61\u4e0a\n * @param {object} nativeEvent \u539f\u751f\u4e8b\u4ef6\u5bf9\u8c61\n */\nfunction createSyntheticEvent(nativeEvent) {\n    for(let key in nativeEvent) {\n        syntheticEvent[key] = nativeEvent[key]\n    }\n}\n")))}i.isMDXComponent=!0}}]);